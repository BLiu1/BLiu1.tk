var playing=!1,difficulty,points=0,lives=5,speed=1,obstaclesAvoided=0,characterPos=1,level=1,paused=!1,altnr=!0,collide=!1,TO,getEl=function(c){return document.getElementById(c)},cb_addEvent=function(c,a,b){if(c.addEventListener)return c.addEventListener(a,b,!1),!0;if(c.attachEvent)return c.attachEvent("on"+a,b);a="on"+a;"function"===typeof c[a]&&(b=function(a,b){return function(){a.apply(this,arguments);b.apply(this,arguments)}}(c[a],b));c[a]=b;return!0}; function hideOverlay(c){getEl("overlay"+c).style.display="none"}function showMore(){getEl("b1").style.display="block";getEl("b4").style.display="block";getEl("b6").style.display="block";getEl("b7").style.display="block";getEl("showMore").style.display="none"}function sLevel(c){hideOverlay(2);difficulty=c}function sColor(c){hideOverlay(3);document.getElementsByTagName("style")[0].innerHTML+=".character{background-color:"+c+"}";startGame()} function startGame(){getEl("20-"+characterPos).className="character";playing=!0;clearMessage();mainGame()} function mainGame(){function c(){var a,b,d;if(!1!==playing&&!0!==paused){for(a=1;10>=a;a++)"character"===getEl("20-"+a).classname?getEl("20-"+a).classname="character":getEl("20-"+a).classname="empty";for(a=19;0<a;a--)for(b=10;0<b;b--)d=a+1,"obstacle"===getEl(a+"-"+b).className&&"character"===getEl(d+"-"+b).className&&(collide=!0),"character"!==getEl(d+"-"+b).className&&(getEl(d+"-"+b).className=getEl(a+"-"+b).className),getEl(a+"-"+b).className="empty";if(!0===altnr){for(a=0;a<difficulty;a++)b=Math.ceil(10* Math.random()),"empty"===getEl("1-"+b).className?getEl("1-"+b).className="obstacle":a--;altnr=!1}else altnr=!0;if(!0===collide&&(lives--,getEl("lives").innerHTML=lives,0===lives)){endGame();return}if(!1===collide){a=!0;for(b=1;10>=b;b++)"obstacle"===getEl("20-"+b).className&&!0===a&&(obstaclesAvoided++,a=!1);!1===a&&(points+=5,getEl("points").innerHTML=points)}0!==obstaclesAvoided&&0===obstaclesAvoided%20&&!0===altnr&&(level++,speed*=0.95,points=10*level+points,getEl("message").innerHTML="<h4>Level Up!</h4><p>Level: "+ level+"</p><p>+"+10*level+" points</p>",clearMessage());collide=!1;!1!==playing&&!0!==paused&&setTimeout(c,500*speed)}}setTimeout(c,500*speed)} document.onkeydown=function(c){var a;window.event?a=c.keyCode:c.which&&(a=c.which);if(!(!1===playing||!0===paused&&80!==a||37!==a&&39!==a&&80!==a)){getEl("20-"+characterPos).className="empty";if(37===a)if(1===characterPos){if("obstacle"===getEl("20-10").className){getEl("20-"+characterPos).className="character";return}characterPos=10}else{c=characterPos-1;if("obstacle"===getEl("20-"+c).className){getEl("20-"+characterPos).className="character";return}characterPos--}else if(39===a)if(10===characterPos){if("obstacle"=== getEl("20-1").className){getEl("20-"+characterPos).className="character";return}characterPos=1}else{c=characterPos+1;if("obstacle"===getEl("20-"+c).className){getEl("20-"+characterPos).className="character";return}characterPos++}else!1===paused?(paused=!0,getEl("message").innerHTML="Paused..."):(paused=!1,getEl("message").innerHTML="",mainGame());getEl("20-"+characterPos).className="character"}};function clearMessage(){TO=setTimeout(function(){getEl("message").innerHTML=""},7E3)} function displayHelp(){alert("Help and Information\n------------------------\n\nThe objective of this game is to use the arrow keys to move the character and avoid the falling obstacles.\nFive points are awarded for each row of obstacles avoided.\nAfter each twenty rows avoided, you level up. When you level up, the obstacles fall 5% faster, and 10 times the level number is added to your score.\nIf you are hit by an obstacle head on, then one life is taken away. If you bump into one from the side, it stops you. Once you have no more lives, the game stops.\nTo pause, press p.")} function endGame(){playing=!1;clearTimeout(TO);getEl("message").innerHTML="<span id='gameover'>Game Over</span><p><a href='./'>Play Again?</a></p>"}function createTable(c,a){var b="",d,e;for(d=1;d<=c;d++){b+="<tr>";for(e=1;e<=a;e++)b+="<td id='"+d+"-"+e+"' class='empty'></td>";b+="</tr>"}getEl("mainTable").innerHTML=b}createTable(20,10);cb_addEvent(getEl("start"),"click",function(){hideOverlay(1)});cb_addEvent(getEl("help1"),"click",function(){displayHelp()});cb_addEvent(getEl("help2"),"click",function(){displayHelp()}); cb_addEvent(getEl("showMore"),"click",function(){showMore()});cb_addEvent(getEl("b1"),"click",function(){sLevel(1)});cb_addEvent(getEl("b2"),"click",function(){sLevel(2)});cb_addEvent(getEl("b3"),"click",function(){sLevel(3)});cb_addEvent(getEl("b4"),"click",function(){sLevel(4)});cb_addEvent(getEl("b5"),"click",function(){sLevel(5)});cb_addEvent(getEl("b6"),"click",function(){sLevel(6)});cb_addEvent(getEl("b7"),"click",function(){sLevel(7)});cb_addEvent(getEl("c1"),"click",function(){sColor("#FF0000")}); cb_addEvent(getEl("c2"),"click",function(){sColor("#00FF00")});cb_addEvent(getEl("c3"),"click",function(){sColor("#0000FF")});cb_addEvent(getEl("c4"),"click",function(){sColor("#FF00FF")});cb_addEvent(getEl("c5"),"click",function(){sColor("#FFFF00")});cb_addEvent(getEl("c6"),"click",function(){sColor("#00FFFF")});cb_addEvent(getEl("c7"),"click",function(){sColor("#FFFFFF")});